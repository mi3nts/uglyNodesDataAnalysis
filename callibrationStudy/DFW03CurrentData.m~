
clc
clear all
close all 

dataFolder = "../../../data"; 
tStart = datetime(2018,10,18);
tEnd   = datetime(2018,10,20);

nodeID =  "001e0610c2e5"


uglyNodeData        = getUglyNodeData(tStart,tEnd,nodeID);
uglyNodeDataPredict = tableMixerUglyNode(uglyNodeData);

uglyNodeData


predictorPM2_5 = predictorLoader(nodeID,dataFolder,"pm2_5","BoostedTree");


[inputWanted,variableNames]  =   getInputAll(uglyNodeDataPredict);

predictionCurrent         = predictorPM2_5.predict(inputWanted);

scatterPlotter1x(...
            uglyNodeDataPredict.opc_n2_pm1,...
            predictionCurrent,...
            1000,1000,...
            "Boosted Tree Prediction",...
            "Alpha Sensor",...
            nodeID,...
            "PM2.5",...
            "Feild Data",...
            "FeildDataAllInputs",...
            dataFolder);

% timePlotter2x(times,Data1,Data2,yLabel,displayName1,displayName2,nodeID,estimator,titlePre,saveNamePre)
timePlotter2x(...
    uglyNodeDataPredict.dateTime,...
    uglyNodeDataPredict.opc_n2_pm1,...
    predictionCurrent,...
    "PM2.5",...
    "Alpha Sensor",...
    "Booster Tree Prediction",...
     nodeID,...
     "PM2.5",...
     "Boosted Tree Prediction Comparison - Feild Data - OPC Inputs",... 
     "FieldDataCompPM2_5")









